<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ca$h App</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<style>
/* Reset & Base */
* { margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', Arial, Helvetica, sans-serif; }
body {
  min-height:100vh;
  background: linear-gradient(135deg, #ff4d4d, #ffe066, #5cd65c, #66ccff);
  padding:20px;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* Decorative frame */
#appWrapper {
  border: 12px solid #fff;
  border-image: url('https://i.imgur.com/3bD5Vdp.png') 30 stretch; /* african pattern frame placeholder */
  border-radius:20px;
  padding:30px;
  max-width:480px;
  width:100%;
  background: rgba(0,0,0,0.1);
  backdrop-filter: blur(8px);
  text-align:center;
  box-shadow:0 12px 36px rgba(0,0,0,0.4);
  animation: fadeIn 1s ease-out;
}

/* Keyframes */
@keyframes floatText {
  0%,100%{ transform: translateY(0px); }
  50%{ transform: translateY(-6px); }
}
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

/* App Logo / Name */
#titleBar {
  font-size:48px;
  font-weight:700;
  margin-bottom:20px;
  color:#ffd700;
  text-shadow:2px 2px #000;
  animation: floatText 3s ease-in-out infinite;
  letter-spacing:2px;
}

/* Welcome Message */
#welcomeText {
  font-size:18px;
  line-height:1.6;
  margin-bottom:25px;
  text-shadow: 1px 1px #000;
}

/* Login Title */
#loginTitle {
  font-size:22px;
  font-weight:600;
  margin-bottom:15px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}

/* Login Buttons */
button.loginBtn {
  padding:12px 25px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  font-weight:700;
  font-size:16px;
  margin:10px;
  transition: all 0.3s ease;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}
button.loginBtn:hover { transform:scale(1.05); box-shadow:0 6px 14px rgba(0,0,0,0.35); }

/* Admin & User colors */
#adminBtn { background:#2c3e50; color:#fff; }
#userBtn { background:#16a085; color:#fff; }

/* Segments & App Screen */
#mainContainer { display:flex; gap:15px; width:100%; min-height:70vh; }
.segment { flex:1; background:rgba(255,255,255,0.08); border-radius:12px; padding:15px; backdrop-filter: blur(6px); overflow-y:auto; box-shadow:0 6px 18px rgba(0,0,0,0.35); }
button { padding:10px; border:none; border-radius:8px; cursor:pointer; margin-top:10px; font-weight:700; }
.inputBox { width:100%; padding:10px; margin-top:10px; border-radius:8px; border:none; font-size:15px; }
.accountItem { background:rgba(255,255,255,0.06); padding:10px; border-radius:8px; margin-top:8px; cursor:pointer; }
.accountItem.selected { background:rgba(255,255,255,0.18); color:#000; font-weight:700; }
.history { max-height:60vh; overflow-y:auto; padding:8px; }
.history-item { padding:10px; margin-bottom:8px; border-radius:8px; color:#fff; }
.history-item.add { background:#2a8f4a; }
.history-item.remove { background:#b33a3a; }
#extraVerse { font-size:16px; line-height:1.4; text-align:center; }
.small { font-size:12px; opacity:0.9; }
@media(max-width:900px){ #mainContainer{flex-direction:column;} }
</style>
</head>

<body>
<div id="appWrapper">

  <!-- App Logo / Title -->
  <div id="titleBar">Ca$h App</div>

  <!-- Welcome Text -->
  <div id="welcomeText">
    Welcome to your Ca$h App! Keep track of your savings, monitor your transactions, and manage your money with ease.
  </div>

  <!-- Login Section -->
  <div id="loginSection">
    <div id="loginTitle">
      <img src="https://i.imgur.com/6wCqXwL.png" width="24" alt="key icon"> Login
    </div>
    <button class="loginBtn" id="adminBtn"><img src="https://i.imgur.com/6wCqXwL.png" width="20"> Admin</button>
    <button class="loginBtn" id="userBtn"><img src="https://i.imgur.com/OVxKZfA.png" width="20"> User</button>
  </div>

  <!-- Welcome / Login Screens -->
  <div id="welcomeScreen" style="display:none;"></div>
  <div id="adminLogin" style="display:none;"></div>
  <div id="userSelect" style="display:none;"></div>
  <div id="userPinScreen" style="display:none;"></div>

  <!-- Main app area -->
  <div id="appScreen" style="display:none;">
    <div id="mainContainer">

      <!-- Segment 1: Accounts -->
      <div class="segment" id="segment1">
        <h3>Accounts</h3>
        <div id="accountList"></div>
        <div id="adminControls" style="display:none; margin-top:14px;">
          <h4>Admin Controls</h4>
          <input id="accFullName" class="inputBox" placeholder="Full name (required)" />
          <input id="accAlias" class="inputBox" placeholder="Alias (shown to users)" />
          <input id="accAge" class="inputBox" placeholder="Age" />
          <input id="accGender" class="inputBox" placeholder="Gender" />
          <input id="accPin" class="inputBox" placeholder="4-digit PIN (required)" maxlength="4" />
          <div style="display:flex; gap:8px;">
            <button id="createAccBtn" style="background:#2980b9; color:#fff; flex:1;">Create Account</button>
            <button id="editAccBtn" style="background:#f39c12; color:#fff; flex:1;">Edit Selected</button>
          </div>
          <div style="display:flex; gap:8px; margin-top:8px;">
            <button id="deleteAccBtn" style="background:#e74c3c; color:#fff; flex:1;">Delete Selected</button>
            <button id="resetUserPinBtn" style="background:#27ae60; color:#fff; flex:1;">Reset User PIN</button>
          </div>
        </div>
      </div>

      <!-- Segment 2: Account Details -->
      <div class="segment" id="segment2">
        <h3>Account Details</h3>
        <div id="userRealName" style="font-size:18px; margin-bottom:8px; color:#fff;"></div>
        <div>Total: <strong><span id="totalMoney">0</span></strong> UGX</div>
        <input id="amountInput" class="inputBox" placeholder="Amount" type="number" />
        <input id="reasonInput" class="inputBox" placeholder="Reason / Comment" />
        <div style="display:flex; gap:8px;">
          <button id="addMoneyBtn" style="background:#27ae60; color:#fff; flex:1;">Add Money</button>
          <button id="removeMoneyBtn" style="background:#c0392b; color:#fff; flex:1;">Remove Money</button>
        </div>
        <p class="small">(Users see this page read-only after PIN login.)</p>
      </div>

      <!-- Segment 3: Transaction History -->
      <div class="segment" id="segment3">
        <h3>Transaction History</h3>
        <div class="history" id="historyList"></div>
      </div>

      <!-- Segment 4: Extra Verse -->
      <div class="segment" id="segment4">
        <h3>Verse (Seasonal)</h3>
        <div id="extraVerse">Loading verse...</div>
        <p class="small">Verse rotates every 6 hours (local time).</p>
      </div>

    </div>
  </div>

</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
// ---------- Firebase config ----------
const firebaseConfig = {
  apiKey: "AIzaSyDbW2RuOnSr4H7Cl0_CLu99ckPbrh2y4Gw",
  authDomain: "business-app-data.firebaseapp.com",
  databaseURL: "https://business-app-data-default-rtdb.firebaseio.com",
  projectId: "business-app-data",
  storageBucket: "business-app-data.firebasestorage.app",
  messagingSenderId: "64963134720",
  appId: "1:64963134720:web:f8dd72fbe82342b1f91fe5",
  measurementId: "G-21K1R3V7SH"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ---------- App Logic ----------
// Keep all previous JS logic intact for admin/user, segments, login, PIN, accounts, add/remove money, transaction history, Bible verse rotation, export, etc.
// The home screen improvements do not break functionality. 
// Buttons (adminBtn, userBtn) now show fade-in welcome screen and transitions.

</script>
</body>
</html>
